<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://matchingRuleScreenCaption"
        class="com.haulmont.addon.ldap.web.screens.MatchingRuleScreen"
        messagesPack="com.haulmont.addon.ldap.web.screens">
    <dsContext>
        <collectionDatasource id="abstractMatchingRulesDs"
                              allowCommit="false"
                              class="com.haulmont.addon.ldap.entity.AbstractCommonMatchingRule"
                              datasourceClass="com.haulmont.addon.ldap.web.screens.datasources.MatchingRuleDatasource"/>
        <collectionDatasource id="appliedMatchingRulesDs"
                              allowCommit="false"
                              class="com.haulmont.addon.ldap.entity.AbstractCommonMatchingRule"/>
        <collectionDatasource id="appliedRolesDs"
                              allowCommit="false"
                              class="com.haulmont.cuba.security.entity.Role"
                              view="_local"/>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout>
        <groupBox height="355px"
                  spacing="true">
            <table id="matchingRuleTable"
                   editable="true"
                   height="100%"
                   width="100%">
                <actions>
                    <action id="edit"/>
                    <action id="remove"/>
                </actions>
                <columns>
                    <column id="matchingRuleTableStateColumn"
                            caption="msg://matchingRuleTableStateColumn"
                            generator="generateMatchingRuleTableStatusColumnCell"/>
                    <column id="matchingRuleTableOrderColumn"
                            caption="msg://matchingRuleTableOrderColumn"
                            generator="generateMatchingRuleTableOrderColumnCell"/>
                    <column id="matchingRuleTableTerminalColumn"
                            caption="msg://matchingRuleTableTerminalColumn"
                            generator="generateMatchingRuleTableTerminalColumnCell"/>
                    <column id="description"
                            caption="msg://matchingRuleTableDescriptionColumn"
                            generator="generateMatchingRuleTableDescriptionColumnCell"/>
                    <column id="matchingRuleTableTypeColumn"
                            caption="msg://matchingRuleTableTypeColumn"
                            generator="generateMatchingRuleTableTypeColumnCell"/>
                    <column id="matchingRuleTableCubaColumn"
                            caption="msg://matchingRuleTableCubaColumn"
                            generator="generateMatchingRuleTableCubaColumnCell"/>
                    <column id="matchingRuleTableOptionsColumn"
                            caption="msg://matchingRuleTableOptionsColumn"
                            generator="generateMatchingRuleTableOptionsColumnCell"/>
                    <column id="matchingRuleTableConditionColumn"
                            caption="msg://matchingRuleTableConditionColumn"
                            generator="generateMatchingRuleTableConditionColumnCell"/>
                </columns>
                <rows datasource="abstractMatchingRulesDs"/>
                <buttonsPanel height="29px">
                    <popupButton caption="msg://createMatchingRule">
                        <actions>
                            <action id="createSimpleRule"
                                    caption="msg://createSimpleRuleAction"
                                    invoke="onSimpleRuleCreateButtonClick"/>
                            <action id="createScriptingRule"
                                    caption="msg://createScriptingRuleActon"
                                    invoke="onScriptingRuleCreateButtonClick"/>
                        </actions>
                    </popupButton>
                    <button id="ruleEditButton"
                            action="matchingRuleTable.edit"
                            caption="msg://ruleEditButton"/>
                    <button id="ruleRemoveButton"
                            action="matchingRuleTable.remove"
                            caption="msg://ruleRemoveButton"/>
                    <button id="up"
                            icon="icons/up.png"
                            invoke="onUpClick"/>
                    <button id="down"
                            icon="icons/down.png"
                            invoke="onDownClick"/>
                </buttonsPanel>
            </table>
        </groupBox>
        <groupBox spacing="true">
            <flowBox spacing="true"
                     width="100%">
                <label height="20px"
                       value="msg://testRuleScreenUserName"/>
                <textField id="testRuleScreenLogin"/>
                <button id="testRuleScreenTestButton"
                        caption="msg://testRuleScreenTestButton"
                        invoke="onTestRuleScreenTestButtonClick"/>
            </flowBox>
            <flowBox spacing="true">
                <label value="msg://testRuleScreenAppliedGroup"
                       width="67px"/>
                <textField id="testRuleScreenAppliedGroup"
                           enable="false"/>
            </flowBox>
            <hbox spacing="true"
                  width="100%">
                <groupBox spacing="true">
                    <table id="testRuleScreenRoleTable"
                           caption="msg://testRuleScreenRoleTable"
                           height="200px"
                           width="100%">
                        <columns>
                            <column id="name"
                                    caption="msg://appliedRolesName"/>
                            <column id="description"
                                    caption="msg://appliedRolesDescription"/>
                        </columns>
                        <rows datasource="appliedRolesDs"/>
                    </table>
                </groupBox>
                <groupBox spacing="true">
                    <table id="testRuleScreenRuleTable"
                           caption="msg://testRuleScreenRuleTable"
                           height="200px"
                           width="100%">
                        <columns>
                            <column id="description"
                                    caption="msg://testMatchingRuleTableDescriptionColumn"
                                    generator="generateMatchingRuleTableDescriptionColumnCell"/>
                            <column id="testMatchingRuleTableTypeColumn"
                                    caption="msg://testMatchingRuleTableTypeColumn"
                                    generator="generateTestMatchingRuleTableTypeColumnCell"/>
                            <column id="testMatchingRuleTableOptionsColumn"
                                    caption="msg://testMatchingRuleTableOptionsColumn"
                                    generator="generateTestMatchingRuleTableOptionsColumnCell"/>
                        </columns>
                        <rows datasource="appliedMatchingRulesDs"/>
                    </table>
                </groupBox>
            </hbox>
            <buttonsPanel>
                <button id="commitButton"
                        caption="msg://matchingRuleScreenCommitButton"
                        invoke="onCommitButtonClick"/>
                <button id="rollbackButton"
                        caption="msg://matchingRuleScreenCancelButton"
                        invoke="onRollbackButtonClick"/>
                <button id="cancelButton"
                        caption="msg://cancel"
                        invoke="onCancelButtonClick"/>
            </buttonsPanel>
        </groupBox>
    </layout>
</window>
